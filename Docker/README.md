# Creating a MariaDB Container Application
Note for Windows 10 Users: Run these commands in PowerShell

Docker is a tool that packages programs that have a lot of dependencies (ie. a database application), into a container (a virtual machine running the bare minimum applications needed to run your program)

1. Install Docker Desktop Community edition to use the Docker command line interface (CLI) and run Docker Containers

Require's DockerID account which will also allow access to docker hub
Windows Installer Options:
Allow sharing of your folder to docker
Ensure to check “allow Access" on "private networks” if prompted by firewall


*First Build the image for MariaDB using Dockerfile*  

2. In Mac Terminal or Windows Powershell navigate to Netflix4Travel github repo, and the docker folder containing the DockerFile. Then run: `docker build -t <image_name> .` 

*Here, replace <image_name> with something understandable like netflix-mariaDB* 

*(note the space before the period at the end)*  

This builds a custom image (or installer) for MariaDB (see details inside the DockerFile)

*Next, use run command that both creates docker container and starts the container with configuration defined by arguments*  
*Change "mypass" to desired password for accessing the database*  

3. `docker run -d --name <container-name> -p 3306:3306 -e MYSQL_ROOT_PASSWORD=mypass --mount type=volume,source=mysqlDB,target=/var/lib/mysql --mount type=bind,source="${PWD}"/datadir,target=/home/ --restart always munners17/mariadb-local`

*docker run arguments used:*  
   *--name: name the container. Refer to this (or the autogenerated containerID) when accessing the container through docker*  
   
   *-p [host port:container port]: map the port the conatiner's mysql server listens on (3306, the default for mysqld) to the same port on the host. This enables **host** mysql clients (e.g. MYSQLWorkbench) to point to localhost machine and see the **container's** mysql server and DB. If you already have a mysql server running on your host, it is probably already bound to 3306 and the container mapping will fail. Change the first port number (the host's) to prevent conflict (e.g. 3307:3306)*  
  
   *-e MYSQL_ROOT_PASSWORD: set environment variable the container is configured to read upon initialization to configure the mysql root password to allow for remote root access*  
   
   *--mount: set a docker mount pointed to the mysql database so that it persists in case container is deleted/removed. set another mount to your host system so you can easily share files back and forth from container to host (/home/ on container is connected to datadir/ subdirectory of this docker/ directory)*  
   
   *--restart: allow container to auto start when ever docker engine boots up (allows container to boot up when computer restarts)*  

4. Now, from your terminal you can run:
	docker stop <container-name>
	docker start <container-name> 
	
	(ie. you do not need to rebuild an image, or rerun the 'run' command)

5. Now that you have a database application, you can connect it to a database GUI. We use Datagrip for class, you can read more about it starting from point 5. in the Workshop1.md

6. Run the Build Netflix4Travel.sql file in whatever database console you're running (ie. Datagrip). Make sure to change the local path of the .csv files it's pulling from.
	This creates the SQL tables from which we will pull data in our web application.

7. When you run the Web Application Jupyter notebook file, you should get a simple web application running on http://localhost:5000 

To change the front-end look, apply changes to the html templates in the the 'templates' folder.

Let me know if you have any questions. 
	










